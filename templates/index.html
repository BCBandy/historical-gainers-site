<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <meta name="description" content="Discover historical percent gainers: top stocks with +50% daily gains, small-cap runners, and monthly stats. Free data for traders since 2020.">
    <title>Historical Percent Gainers | Free Daily Stock Top Stock Gainers</title>
    <link rel="stylesheet" href="./static/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Icon -->
    <link rel="icon" href="./static/art/green-rocket-128px.png" type="image/png" alt="Historical percent gainers logo - free stock data"

>
    <!-- <link rel="apple-touch-icon" href="./art/green-rocket-400px.png"> -->
    

</head>
<body>
    <!-- Dark Mode Tester -->
    <!-- <div style="position:fixed; top:10px; right:10px; z-index:9999; background:#000; color:#fff; padding:10px; border-radius:8px; font-family:Arial; font-size:14px;">
        <label>
            <input type="checkbox" id="forceDark" onchange="
            if(this.checked){
                document.body.style.background='#0d1117';
                document.body.style.color='#c9d1d9';
                document.querySelectorAll('input, select, textarea, button').forEach(e=>{
                e.style.background='#161b22'; e.style.color='#c9d1d9'; e.style.borderColor='#30363d';
                });
            } else {
                document.body.style.background=''; document.body.style.color='';
                document.querySelectorAll('input, select, textarea, button').forEach(e=>{e.style=''});
            }
            ">
            Dark Mode
        </label>
    </div> -->
    <header>
    <!-- <nav class="tabs">
        <nav class="modern-tabs">
            <a href="#" class="tab-active" data-tab="gainers">Top Gainers</a>
            <a href="#" data-tab="stats">Stats</a>
            <a href="#" data-tab="about">About</a>
            <a href="#" data-tab="request-features">Request Features</a>
        </nav>
    </nav> -->
    <nav class="sidebar-nav">
        <!-- Logo sits outside the padding zone - drop shadow: drop-shadow-[0_0_30px_rgba(57,255,20,1)] -->
        <div class="logo">
        <a href="/" data-tab="gainers">
            <img src="/static/art/green-rocket-400px.png"
                alt="Historical percent gainers logo - free stock data"
                class="w-52 h-auto object-contain
                        forced-color-adjust-none
                        select-none pointer-events-none"
                loading="eager">
        </a>
        </div>

        <!-- Your existing menu items (keep all your padding/margin) -->
        <a href="#" data-tab="gainers" class="active"><span>Top Gainers</span></a>
        <a href="#" data-tab="stats"><span>Stats</span></a>
        <a href="#" data-tab="about"><span>About</span></a>
        <a href="#" data-tab="request-features"><span>Request Features</span></a>
    </nav>
    </header>
    <main>
        <!-- ========== TOP GAINERS (Home) ========== -->
        <section id="gainers" class="tab-content active">
            <div class="gainers-container">
                <!-- Sidebar for filters -->
                <aside>
                    <div class="sidebar">
                        <h2>Filters</h2>
                        <div class="form-group">
                            <label for="symbol-filter">Symbol:</label>
                            <input type="text" id="symbol-filter" placeholder="GME" />
                        </div>
                        <div class="form-group">
                            <label for="pct-gain-filter">Min %:</label>
                            <input type="number" id="pct-gain-filter" placeholder="20" />
                        </div>
                        <div class="form-group">
                            <label for="high-filter">Min High:</label>
                            <input type="number" id="high-filter" placeholder=".2" />
                        </div>
                        <div class="form-group">
                            <label for="volume-filter">Min VolM:</label>
                            <input type="number" id="volume-filter" placeholder="20" />
                        </div>
                        <div class="form-group">
                            <label for="min-date-filter">Min Date:</label>
                            <input type="date" id="min-date-filter" placeholder="e.g., 1-1-2020" />
                        </div>
                        <div class="form-group">
                            <label for="max-date-filter">Max Date:</label>
                            <input type="date" id="max-date-filter" placeholder="e.g., 1-1-2021" />
                        </div>
                        <div class="filter-buttons">
                            <button id="clear-filter">X</button>
                            <button id="apply-filter">Apply Filter</button>
                        </div>
                    </div>
                    <div class="promo">
                        <p>Follow on Twitter/X <a href="https://x.com/BlakeBandit" target="_blank">https://x.com/BlakeBandit</a></p>
                    </div>
                    
                </aside>

                <div class="gainers-table-group">
                    <table id="gainers-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Symbol</th>
                                <th>Percent Gain</th>
                                <th>High</th>
                                <th>Volume Mil</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>

                    <div class="pagination-container">
                        <div id="rows-per-page-div">
                            <label for="rows-per-page">Rows per page:</label>
                                <select id="rows-per-page">
                                    <option value="5">5</option>
                                    <option value="10">10</option>
                                    <option value="20" selected>20</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                        </div>

                        <!-- Pagination Controls -->
                        <div id="pagination-controls">
                            <button onclick="prevPage()" id="prev-btn" disabled>Previous</button>
                            <span id="page-info"></span>
                            <button onclick="nextPage()" id="next-btn">Next</button>
                        </div>  
                    </div>
                </div>
            </div>
        </section>
        <!-- stats tab -->
        <section id="stats" class="tab-content">
            <div class="stats-container">
                <div class="stats-header">
                    <h2>Gainers Per Month</h2>
                    <p id="chartDescription" class="chart-description">
                        Total number of stocks with +50% gain each month
                    </p>
                </div>

                <!-- Controls Row -->
                <div class="stats-controls">
                    <div class="control-group">
                        <label for="yearFilter">Select Year</label>
                        <select id="yearFilter"></select>
                    </div>

                    <div class="control-group">
                        <label for="minPctFilter">Min % Gain</label>
                        <input type="number" id="minPctFilter" value="50" min="10" step="5" placeholder="50">
                    </div>

                    <div class="control-group">
                        <label for="monthFilter">Show Month</label>
                        <select id="monthFilter">
                            <option value="">All Months</option>
                            <option value="0">January</option>
                            <option value="1">February</option>
                            <option value="2">March</option>
                            <option value="3">April</option>
                            <option value="4">May</option>
                            <option value="5">June</option>
                            <option value="6">July</option>
                            <option value="7">August</option>
                            <option value="8">September</option>
                            <option value="9">October</option>
                            <option value="10">November</option>
                            <option value="11">December</option>
                        </select>
                    </div>
                </div>

                <!-- Chart Card -->
                <div class="chart-card">
                    <div class="chart-wrapper">
                        <canvas id="gainersPerMonthChart"></canvas>
                    </div>
                </div>

                <p class="chart-footer">Data updated daily • Showing historical +50% daily runners</p>
            </div>
        </section>

        <section id="about" class="tab-content">
            <div class="about-container max-w-4xl mx-auto px-4 py-8">
                    <h1 class="text-3xl font-bold text-white mb-6">About Historical Percent Gainers</h1>
                    
                <p class="text-lg text-gray-300 mb-6">
                    Welcome to Historical Percent Gainers — your free resource for tracking historical stock runners with +50% daily gains. We empower small traders by providing accessible data on small-cap historical percent gainers, helping level the playing field in the stock market. Whether you're building a small account or analyzing past trends, our database offers insights into big opportunities from volatile stocks.
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                    <div>
                        <h2 class="text-2xl font-semibold text-[#39FF14] mb-4">Our Mission</h2>
                        <p class="text-gray-300 mb-4">
                            We believe everyone deserves free access to quality stock data. Traditional tools are often behind paywalls, disadvantaging retail traders. That's why we focus on historical percent gainers: to highlight patterns in +50% daily movers, monthly stats, and small-cap explosions that can fuel account growth.
                        </p>
                        <ul class="list-disc list-inside text-gray-300 space-y-2">
                            <li>Daily updated data from reliable sources</li>
                            <li>Filters for symbols, gains, volume, and dates</li>
                            <li>Visual charts for gainers per month</li>
                            <li>Completely free, no sign-ups</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h2 class="text-2xl font-semibold text-[#39FF14] mb-4">Who We Are</h2>
                        <p class="text-gray-300 mb-4">
                            Created by <a href="https://x.com/BlakeBandit" target="_blank" class="text-blue-400 hover:underline">@BlakeBandit</a> on X (formerly Twitter), a passionate trader dedicated to democratizing market insights. We started this site in 2025 to help fellow traders spot historical patterns and make informed decisions.
                        </p>
                        <p class="text-gray-300">
                            Have ideas? Request features or report issues directly on X — we offer a 100% money-back guarantee (since it's free!).
                        </p>
                    </div>
                </div>
                
                <!-- <div class="text-center">
                    <a href="#" data-tab="request-features" class="inline-block bg-[#1f6feb] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#388bfd] transition">
                        Suggest a Feature
                    </a>
                </div> -->
            </div>
        </section>



        <section id="request-features" class="tab-content">
            <div class="placeholder">
                <h2>Request features here</h2>
                <p>Tell me what you want next</p>
                <p>(Coming soon)</p>
                <p>For now please reachout to <a href="https://x.com/BlakeBandit" target="_blank">@BlakeBandit</a> on X.</p>
            </div>
        </section>
        
    </main>
    
    <script>        
        // ────────────────────── TAB SWITCHING ──────────────────────
        document.querySelectorAll('.sidebar-nav a').forEach(tab => {
            tab.addEventListener('click', function(e) {
                e.preventDefault();

                // Remove active class from all tabs and sections
                document.querySelectorAll('.sidebar-nav a').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

                // Add active to clicked tab and corresponding section
                this.classList.add('active');
                const target = this.getAttribute('data-tab');
                document.getElementById(target).classList.add('active');
            });
        });
        
        let rowsPerPage = 20; // Number of rows per page
        let allStocks = []; // Array to hold all stock data
        let filteredStocks = []; // Array to hold all filtered stock data
        let currentPage = 1; // Current page number

        // Fetch all stocks initially
        function fetchStocks() {
            fetch('./static/top_gainers.json') // Data source
                .then(response => response.json())
                .then(data => {
                    allStocks = data; // Store all stocks
                    filteredStocks = data;
                    displayPage(currentPage); // Display the first page
                    updatePaginationControls(); // Update pagination controls
                })
                .catch(error => console.error('Error fetching data:', error));
                // console.log(allStocks)
        }

        // Function to display the stocks for the current page
        function displayPage(page) {
            const container = document.getElementById('gainers-table').querySelector('tbody');
            container.innerHTML = ''; // Clear previous stocks

            // Calculate start and end index based on page and rows per page
            const start = (page - 1) * rowsPerPage;
            const end = start + rowsPerPage;
            const stocksToShow = filteredStocks.slice(start, end);

            // Display the stocks for the current page
            stocksToShow.forEach(stock => {
                const tableBody = document.getElementById('gainers-table').querySelector('tbody');
                const row = document.createElement('tr');
                row.innerHTML = `<td>${stock.Date}</td><td>${stock.symbol}</td><td>${stock.percent_gain.toFixed(2)}%</td><td>${stock.High}</td><td>${stock.Volume.toLocaleString()}</td>`;
                tableBody.appendChild(row);
                
            });

            // Update page info
            document.getElementById('page-info').textContent = `Page ${page} of ${Math.ceil(filteredStocks.length / rowsPerPage)}`;
        }

        // Fetch data on page load
        fetchStocks();

        // Function to update pagination controls
        function updatePaginationControls() {
            document.getElementById('prev-btn').disabled = currentPage === 1;
            document.getElementById('next-btn').disabled = currentPage === Math.ceil(filteredStocks.length / rowsPerPage);
        }

        // Go to the previous page
        function prevPage() {
            if (currentPage > 1) {
                currentPage--;
                displayPage(currentPage);
                updatePaginationControls();
            }
        }

        // Go to the next page
        function nextPage() {
            if (currentPage < Math.ceil(filteredStocks.length / rowsPerPage)) {
                currentPage++;
                displayPage(currentPage);
                updatePaginationControls();
            }
        }

        function applyFilter(){
            const symbol = document.getElementById('symbol-filter').value.toUpperCase();
            const minPctGain = parseFloat(document.getElementById('pct-gain-filter').value) || 0;
            const minDate = document.getElementById('min-date-filter').value;
            const maxDate = document.getElementById('max-date-filter').value;
            const minDateDate = minDate ? new Date(minDate) : null;
            const maxDateDate = maxDate ? new Date(maxDate) : null;
            const high = parseFloat(document.getElementById('high-filter').value) || 0;
            const volume = parseFloat(document.getElementById('volume-filter').value) || 0;
 
            filteredStocks = allStocks.filter(stock => {
                // Check each filter condition only if the input has a value
                const symbolCondition = symbol ? stock.symbol == symbol : true;
                const pctGainCondition = minPctGain ? stock.percent_gain >= minPctGain : true;
                const minDateCondition = minDateDate ? new Date(stock.Date) >= minDateDate : true;
                const maxDateCondition = maxDateDate ? new Date(stock.Date) <= maxDateDate : true;
                const highCondition = high ? stock.High >= high : true;
                const volumeCondition = volume ? stock.Volume >= volume : true;

                // Only stocks meeting all active conditions are included
                return symbolCondition && pctGainCondition && minDateCondition && maxDateCondition && highCondition && volumeCondition;
            });
            // console.log(high)
            currentPage = 1; // Reset to the first page after applying filter
            displayPage(currentPage); 
            updatePaginationControls(); 
        }

        // Event listener for rows per page selection
        document.getElementById('rows-per-page').addEventListener('change', (event) => {
            rowsPerPage = parseInt(event.target.value); // Update items per page
            currentPage = 1; // Reset to first page
            displayPage(currentPage); // Display the first page
            updatePaginationControls(); // Update pagination controls
        });

        // Filter
        document.getElementById('apply-filter').addEventListener('click', () => {
            applyFilter()
        });

        // Filter by percentage gain
        document.getElementById('clear-filter').addEventListener('click', () => {
            const symbolFilter = document.getElementById('symbol-filter');
            const pctGainFilter = document.getElementById('pct-gain-filter');
            const minDateFilter = document.getElementById('min-date-filter');
            const maxDateFilter = document.getElementById('max-date-filter');
            const highFilter = document.getElementById('high-filter');
            const volumeFilter = document.getElementById('volume-filter');

            // Reset all filter input fields
            symbolFilter.value = null;
            pctGainFilter.value = null;
            minDateFilter.value = null;
            maxDateFilter.value = null;
            highFilter.value = null;
            volumeFilter.value = null;

            // Display the unfiltered stock list
            applyFilter()
        });

        // Enter hotkey
        document.addEventListener('keypress', function(event) {
            // Check if the key pressed is Enter (key code 13)
            if (event.key === 'Enter') {
                event.preventDefault(); // Prevent default form submission
                applyFilter();
            }
        });

        let gainersChart = null;

        function createGainersPerMonthChart(selectedYear = null) {
            if (gainersChart) gainersChart.destroy();

            // Read the % filter (default 50 if empty)
            const minPct = parseFloat(document.getElementById('minPctFilter').value) || 50;
            const selectedMonth = document.getElementById('monthFilter').value;

            // Update the description text above the chart
            document.getElementById('chartDescription').textContent = 
                `Total number of stocks with +${minPct}% gain each month`;

            const monthlyCount = {};

            allStocks.forEach(stock => {
                if (stock.percent_gain < minPct) return; // skip stocks below threshold

                const date = new Date(stock.Date);
                const year = date.getFullYear();
                const month = date.getMonth();
                const yearMonth = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;

                if (selectedMonth !== '' && month !== parseInt(selectedMonth)) return;
                if (selectedYear === null || year === parseInt(selectedYear)) {
                    monthlyCount[yearMonth] = (monthlyCount[yearMonth] || 0) + 1;
                }
            });

            // Populate year dropdown
            const years = [...new Set(allStocks.map(s => new Date(s.Date).getFullYear()))].sort().reverse();
            const yearSelect = document.getElementById('yearFilter');
            yearSelect.innerHTML = '<option value="">All Years</option>' +
                years.map(y => `<option value="${y}" ${y == selectedYear ? 'selected' : ''}>${y}</option>`).join('');

            // Build labels/data
            let monthsToShow = Object.keys(monthlyCount);
            if (selectedYear) monthsToShow = monthsToShow.filter(m => m.startsWith(selectedYear));
            monthsToShow.sort();

            const labels = monthsToShow.map(m => {
                const [y, month] = m.split('-');
                return `${new Date(y, month - 1).toLocaleString('en-US', { month: 'short' })} ${y}`;
            });
            const data = monthsToShow.map(m => monthlyCount[m] || 0);

            gainersChart = new Chart(document.getElementById('gainersPerMonthChart'), {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: `+${minPct}% Gainers`,
                        data: data,
                        backgroundColor: '#3b82f6',
                        borderColor: '#60a5fa',
                        borderWidth: 2,
                        borderRadius: 8,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: { callbacks: { label: ctx => `${ctx.parsed.y} stocks` } }
                    },
                    scales: {
                        y: { beginAtZero: true, ticks: { color: '#94a3b8' }, grid: { color: '#1e293b' } },
                        x: { ticks: { color: '#94a3b8' }, grid: { display: false } }
                    }
                }
            });
        }

        // Update chart when year changes
        document.getElementById('yearFilter')?.addEventListener('change', (e) => {
            createGainersPerMonthChart(e.target.value || null);
        });

        // INSTANT update while typing (no need to click away)
        document.getElementById('minPctFilter')?.addEventListener('input', () => {
            const year = document.getElementById('yearFilter').value || null;
            createGainersPerMonthChart(year);
        });

        // Update chart when year changes
        document.getElementById('yearFilter')?.addEventListener('change', (e) => {
            const year = e.target.value;
            createGainersPerMonthChart(year === '' ? null : year);
        });

        // Month filter — instant update
        document.getElementById('monthFilter')?.addEventListener('change', () => {
            const year = document.getElementById('yearFilter').value || null;
            createGainersPerMonthChart(year);
        });

        // ————— Called after data loads —————
        function fetchStocks() {
            fetch('./static/top_gainers.json')
                .then(r => r.json())
                .then(data => {
                    allStocks = data;
                    filteredStocks = data;
                    displayPage(currentPage);
                    updatePaginationControls();

                    createGainersPerMonthChart(); // First load: show all years or latest
                    filteredStocks = data;
                    displayPage(currentPage);
                    updatePaginationControls();

                    // Create the chart once data is ready
                    createGainersPerMonthChart();
                });
        }
        
    </script>
 
</body>
</html>
